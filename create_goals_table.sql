-- Create table for Goals (Metas)
CREATE TABLE IF NOT EXISTS vf_goals (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    category TEXT NOT NULL,
    -- 'BILLING', 'NET_UTILITY', 'EFFICIENCY', 'CHAIR', 'DOCTOR'
    metric TEXT NOT NULL,
    -- 'MONTHLY', 'WEEKLY', 'DAILY', 'MARGIN_PERCENT', 'HOURLY_UTILITY', 'CANCELATION_MAX', 'DAILY_REVENUE', 'MIN_NET_CONTRIBUTION'
    target_value DECIMAL(12, 2) NOT NULL,
    period TEXT DEFAULT 'monthly',
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(category, metric)
);
-- Insert Default Goals (Seed Data)
INSERT INTO vf_goals (category, metric, target_value)
VALUES ('BILLING', 'MONTHLY', 30000),
    ('BILLING', 'WEEKLY', 7500),
    ('BILLING', 'DAILY', 1200),
    ('NET_UTILITY', 'MONTHLY', 12000),
    ('NET_UTILITY', 'MARGIN_PERCENT', 40),
    ('EFFICIENCY', 'HOURLY_UTILITY', 150),
    ('EFFICIENCY', 'CANCELATION_MAX', 8),
    ('CHAIR', 'DAILY_REVENUE', 400),
    ('DOCTOR', 'MIN_NET_CONTRIBUTION', 2000) ON CONFLICT (category, metric) DO NOTHING;